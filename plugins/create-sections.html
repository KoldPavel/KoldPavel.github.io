<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <title>Создание видов — плагины Павла Колдунова</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link rel="stylesheet" href="../assets/plugins.css" />
</head>
<body>
  <header class="page-header">
    <div class="lang-switcher" role="group" aria-label="Language switcher">
      <button type="button" class="is-active" data-lang="ru">РУС</button>
      <button type="button" data-lang="en">ENG</button>
    </div>
    <div class="header-content">
      <a class="back-link" href="../index.html#projects" data-i18n="backLink">← Ко всем плагинам</a>
      <h1 class="page-title" data-i18n="title">Создание видов</h1>
      <p class="page-subtitle" data-i18n="subtitle">Автоматическое построение разрезов по выбранным элементам</p>
    </div>
  </header>

  <main>
    <section class="section plugin-panel-section" aria-label="Быстрый переход к другим плагинам">
      <h2 data-i18n="allPlugins">Все плагины</h2>
      <div class="plugin-panel" role="group" aria-label="Плагины Revit">
        <div class="plugin-group plugin-group--views" aria-label="Работа с видами">
          <p class="plugin-group-title" data-i18n="viewsGroup">Работа с видами</p>
          <div class="plugin-group-buttons">
            <a class="plugin-button" href="create-sections.html" aria-label="Создание видов">
              <img src="../assets/Icons/CreateSections.png" alt="CreateSections" />
              <span class="plugin-title" data-i18n="pluginCreateSections">Создание<br />видов</span>
            </a>
            <a class="plugin-button" href="view-design.html" aria-label="Оформление видов">
              <img src="../assets/Icons/ViewDesign.png" alt="View Design" />
              <span class="plugin-title" data-i18n="pluginViewDesign">Оформление<br />видов</span>
            </a>
          </div>
        </div>
        <div class="plugin-group plugin-group--rebar" aria-label="Армирование и анализ">
          <p class="plugin-group-title" data-i18n="rebarGroup">Армирование и анализ</p>
          <div class="plugin-group-buttons">
            <a class="plugin-button" href="intersection-hosts.html" aria-label="Назначить хосты DS">
              <img src="../assets/Icons/Intersection.png" alt="Intersection" />
              <span class="plugin-title" data-i18n="pluginIntersectionHosts">Назначить<br />хосты DS</span>
            </a>
            <a class="plugin-button" href="path-reinforcement.html" aria-label="Дополнительное армирование">
              <img src="../assets/Icons/PathReinf.png" alt="Path Reinforcement" />
              <span class="plugin-title" data-i18n="pluginPathReinforcement">Дополнительное<br />армирование</span>
            </a>
            <a class="plugin-button" href="results-viewer.html" aria-label="Просмотр результатов">
              <img src="../assets/Icons/Results.png" alt="Results" />
              <span class="plugin-title" data-i18n="pluginResultsViewer">Просмотр<br />результатов</span>
            </a>
            <a class="plugin-button" href="directshape-from-points.html" aria-label="DirectShape из точек">
              <img src="../assets/Icons/RevitDirectShape.png" alt="Revit DirectShape" />
              <span class="plugin-title" data-i18n="pluginDirectshape">DirectShape<br />из точек</span>
            </a>
          </div>
        </div>
      </div>
    </section>

    <div class="plugin-hero">
      <div class="plugin-icon">
        <img src="../assets/Icons/CreateSections.png" alt="Иконка плагина Создание видов" width="60" height="60" />
      </div>
      <div>
        <div class="badge" data-i18n="badge">Автоматизация документации</div>
        <p data-i18n="heroText">
          Плагин создаёт разрезы с заданными шаблонами и границами обрезки по выбранным конструкциям (стены, колонны, балки).
          Дополнительно можно автоматически сформировать листы, спецификации и разместить виды на листах.
        </p>
      </div>
    </div>

    <section class="section">
      <h2 data-i18n="featuresTitle">Ключевые возможности</h2>
      <ul data-i18n="featuresList">
        <li>Создание разрезов + спецификаций + листов и их размещение на листе быстрее в <strong>7-10 раз</strong> в сравненнии с ручной работой.</li>
        <li>Автоматическая генерация разрезов по нескольким конструкциям за один запуск.</li>
        <li>Именование видов по заданному шаблону.</li>
        <li>Сохранение настроенных конфигураций.</li>
        <li>Создание листов с заданными параметрами.</li>
        <li>Создание спецификаций с заданными параметрами и значением фильтра.</li>
        <li>Размещение подготовленных видов на листах прямо из плагина.</li>
      </ul>
    </section>

    <section class="section">
      <h2 data-i18n="screenshotsTitle">Скриншоты</h2>
      <div class="screenshot-grid">
        <figure>
          <img src="../assets/Screenshots/CreateSections/CreateSections_1.png" alt="Настройка конфигурации" />
          <figcaption data-i18n="caption1">Настройка конфигурации.</figcaption>
        </figure>
        <figure>
          <img src="../assets/Screenshots/CreateSections/CreateSections_2.png" alt="Выбор шаблонов видов" />
          <figcaption data-i18n="caption2">Плагин создал разрезы, спецификации и лист с этими видами.</figcaption>
        </figure>
        <figure>
          <img src="../assets/Screenshots/CreateSections/CreateSections_3.png" alt="Параметры создания листов" />
          <figcaption data-i18n="caption3">Расстановка видов плагином.</figcaption>
        </figure>
        <figure>
          <img src="../assets/Screenshots/CreateSections/CreateSections_4.png" alt="Итоговые виды на листах" />
          <figcaption data-i18n="caption4">Результат после ручных правок.</figcaption>
        </figure>
      </div>
    </section>
  </main>

  <div class="lightbox" aria-hidden="true" role="dialog" aria-label="Просмотр скриншотов" data-i18n="lightboxAria">
    <div class="lightbox__dialog">
      <button class="lightbox__close" type="button" aria-label="Закрыть просмотр" data-i18n="lightboxClose">×</button>
      <div class="lightbox__image-wrapper">
        <img class="lightbox__image" src="" alt="" />
      </div>
      <p class="lightbox__caption"></p>
      <div class="lightbox__controls">
        <div class="lightbox__buttons">
          <button class="lightbox__button" type="button" data-direction="prev" data-i18n="lightboxPrev">← Назад</button>
          <button class="lightbox__button" type="button" data-direction="next" data-i18n="lightboxNext">Вперед →</button>
        </div>
        <span class="lightbox__counter" aria-live="polite"></span>
      </div>
    </div>
  </div>

  <script src="../assets/lang-switcher.js"></script>
  <script>
    const translations = {
      ru: {
        backLink: "← Ко всем плагинам",
        title: "Создание видов",
        subtitle: "Автоматическое построение разрезов по выбранным элементам",
        allPlugins: "Все плагины",
        viewsGroup: "Работа с видами",
        rebarGroup: "Армирование и анализ",
        pluginCreateSections: "Создание<br />видов",
        pluginViewDesign: "Оформление<br />видов",
        pluginIntersectionHosts: "Назначить<br />хосты DS",
        pluginPathReinforcement: "Дополнительное<br />армирование",
        pluginResultsViewer: "Просмотр<br />результатов",
        pluginDirectshape: "DirectShape<br />из точек",
        badge: "Автоматизация документации",
        heroText:
          "Плагин создаёт разрезы с заданными шаблонами и границами обрезки по выбранным конструкциям (стены, колонны, балки). Дополнительно можно автоматически сформировать листы, спецификации и разместить виды на листах.",
        featuresTitle: "Ключевые возможности",
        featuresList:
          "<li>Создание разрезов + спецификаций + листов и их размещение на листе быстрее в <strong>7-10 раз</strong> в сравненнии с ручной работой.</li>" +
          "<li>Автоматическая генерация разрезов по нескольким конструкциям за один запуск.</li>" +
          "<li>Именование видов по заданному шаблону.</li>" +
          "<li>Сохранение настроенных конфигураций.</li>" +
          "<li>Создание листов с заданными параметрами.</li>" +
          "<li>Создание спецификаций с заданными параметрами и значением фильтра.</li>" +
          "<li>Размещение подготовленных видов на листах прямо из плагина.</li>",
        screenshotsTitle: "Скриншоты",
        caption1: "Настройка конфигурации.",
        caption2: "Плагин создал разрезы, спецификации и лист с этими видами.",
        caption3: "Расстановка видов плагином.",
        caption4: "Результат после ручных правок.",
        lightboxAria: "Просмотр скриншотов",
        lightboxClose: "×",
        lightboxPrev: "← Назад",
        lightboxNext: "Вперед →",
      },
      en: {
        backLink: "← Back to all plugins",
        title: "Create Sections",
        subtitle: "Automatic section creation for selected elements",
        allPlugins: "All plugins",
        viewsGroup: "Views",
        rebarGroup: "Reinforcement and analysis",
        pluginCreateSections: "Create<br />sections",
        pluginViewDesign: "View<br />styling",
        pluginIntersectionHosts: "Assign<br />DS hosts",
        pluginPathReinforcement: "Additional<br />reinforcement",
        pluginResultsViewer: "Results<br />viewer",
        pluginDirectshape: "DirectShape<br />from points",
        badge: "Documentation automation",
        heroText:
          "The plugin creates sections with predefined templates and crop boundaries for chosen elements (walls, columns, beams). It can also generate sheets, schedules, and place the created views on sheets automatically.",
        featuresTitle: "Key capabilities",
        featuresList:
          "<li>Create sections + schedules + sheets and place them on sheets <strong>7–10x faster</strong> than manual work.</li>" +
          "<li>Automatically generate sections for multiple elements in one run.</li>" +
          "<li>Name views using a configurable pattern.</li>" +
          "<li>Save configured presets.</li>" +
          "<li>Create sheets with predefined parameters.</li>" +
          "<li>Create schedules with predefined parameters and filter values.</li>" +
          "<li>Place prepared views on sheets directly from the plugin.</li>",
        screenshotsTitle: "Screenshots",
        caption1: "Configuration setup.",
        caption2: "The plugin created sections, schedules, and a sheet with these views.",
        caption3: "View placement by the plugin.",
        caption4: "Result after manual tweaks.",
        lightboxAria: "Screenshot viewer",
        lightboxClose: "×",
        lightboxPrev: "← Previous",
        lightboxNext: "Next →",
      },
    };

    initLanguageSwitcher(translations);

    (() => {
      const figures = Array.from(document.querySelectorAll(".screenshot-grid figure"));
      if (!figures.length) return;

      const lightbox = document.querySelector(".lightbox");
      const lightboxImage = lightbox.querySelector(".lightbox__image");
      const lightboxCaption = lightbox.querySelector(".lightbox__caption");
      const lightboxCounter = lightbox.querySelector(".lightbox__counter");
      const closeButton = lightbox.querySelector(".lightbox__close");
      const prevButton = lightbox.querySelector('[data-direction="prev"]');
      const nextButton = lightbox.querySelector('[data-direction="next"]');

      const images = figures.map((figure) => {
        const img = figure.querySelector("img");
        const caption = figure.querySelector("figcaption");
        img.tabIndex = 0;
        return {
          img,
          caption: caption ? caption.textContent.trim() : "",
        };
      });

      let currentIndex = 0;

      function updateViewer(index) {
        const { img, caption } = images[index];
        lightboxImage.src = img.src;
        lightboxImage.alt = img.alt || "Скриншот";
        lightboxCaption.textContent = caption;
        lightboxCounter.textContent = `${index + 1} / ${images.length}`;
      }

      function openViewer(index) {
        currentIndex = index;
        updateViewer(currentIndex);
        lightbox.classList.add("open");
        lightbox.setAttribute("aria-hidden", "false");
        document.body.style.overflow = "hidden";
        closeButton.focus();
      }

      function closeViewer() {
        lightbox.classList.remove("open");
        lightbox.setAttribute("aria-hidden", "true");
        document.body.style.overflow = "";
      }

      function showRelative(step) {
        currentIndex = (currentIndex + step + images.length) % images.length;
        updateViewer(currentIndex);
      }

      figures.forEach((figure, index) => {
        const img = figure.querySelector("img");
        const open = () => openViewer(index);

        figure.addEventListener("click", open);
        figure.addEventListener("keydown", (event) => {
          if (event.key === "Enter" || event.key === " ") {
            event.preventDefault();
            open();
          }
        });
        img.setAttribute("role", "button");
        img.setAttribute("aria-label", img.alt || "Открыть скриншот");
      });

      closeButton.addEventListener("click", closeViewer);
      lightbox.addEventListener("click", (event) => {
        if (event.target === lightbox) {
          closeViewer();
        }
      });

      prevButton.addEventListener("click", () => showRelative(-1));
      nextButton.addEventListener("click", () => showRelative(1));

      window.addEventListener("keydown", (event) => {
        if (!lightbox.classList.contains("open")) return;
        if (event.key === "Escape") {
          closeViewer();
        } else if (event.key === "ArrowRight") {
          showRelative(1);
        } else if (event.key === "ArrowLeft") {
          showRelative(-1);
        }
      });
    })();
  </script>
</body>
</html>
